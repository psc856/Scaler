@use '../../styles/variables' as *;

.settings-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: $z-modal;
  display: flex;
  align-items: center;
  justify-content: center;
}

.settings-modal {
  background: white;
  border-radius: $radius-lg;
  width: 90%;
  max-width: 600px;
  max-height: 90vh;
  overflow: hidden;
  box-shadow: $shadow-lg;

  .settings-modal-content {
    display: flex;
    flex-direction: column;
    max-height: 90vh;

    .settings-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: $spacing-lg;
      border-bottom: 1px solid $border-light;

      .header-title {
        display: flex;
        align-items: center;
        gap: $spacing-md;

        svg {
          color: $google-blue;
        }

        h2 {
          margin: 0;
          font-size: 24px;
          font-weight: 400;
        }
      }

      .close-button {
        padding: $spacing-sm;
        border-radius: $radius-full;
        color: $text-secondary;

        &:hover {
          background: $surface-variant;
        }
      }
    }

    .settings-body {
      flex: 1;
      overflow-y: auto;
      padding: $spacing-lg;

      .settings-section {
        margin-bottom: $spacing-xl;

        &:last-child {
          margin-bottom: 0;
        }

        .section-header {
          display: flex;
          align-items: center;
          gap: $spacing-sm;
          margin-bottom: $spacing-lg;

          svg {
            color: $text-secondary;
          }

          h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 500;
          }
        }

        .setting-item {
          margin-bottom: $spacing-lg;

          label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: $text-primary;
            margin-bottom: $spacing-sm;
          }

          input[type="email"],
          input[type="text"],
          select {
            width: 100%;
            padding: $spacing-sm $spacing-md;
            border: 1px solid $border-light;
            border-radius: $radius-sm;
            font-size: 14px;

            &:focus {
              border-color: $google-blue;
              outline: none;
            }
          }

          small {
            display: block;
            margin-top: $spacing-xs;
            font-size: 12px;
            color: $text-tertiary;
          }

          .switch-label {
            display: flex;
            align-items: center;
            gap: $spacing-md;
            cursor: pointer;

            input[type="checkbox"] {
              display: none;
            }

            .switch-slider {
              position: relative;
              width: 44px;
              height: 24px;
              background: $border-medium;
              border-radius: $radius-full;
              transition: background $transition-fast;

              &::after {
                content: '';
                position: absolute;
                top: 2px;
                left: 2px;
                width: 20px;
                height: 20px;
                background: white;
                border-radius: $radius-full;
                transition: transform $transition-fast;
              }
            }

            input[type="checkbox"]:checked + .switch-slider {
              background: $google-blue;

              &::after {
                transform: translateX(20px);
              }
            }
          }

          .gmail-connection {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: $spacing-md;
            background: $surface-variant;
            border-radius: $radius-sm;
            margin-top: $spacing-md;

            .gmail-status {
              display: flex;
              align-items: center;
              gap: $spacing-sm;
              font-size: 14px;
              font-weight: 500;

              .status-indicator {
                width: 8px;
                height: 8px;
                border-radius: $radius-full;
                
                &.connected {
                  background: #34a853;
                }
                
                &.disconnected {
                  background: #ea4335;
                }
              }
            }

            .gmail-button {
              display: flex;
              align-items: center;
              gap: $spacing-xs;
              padding: $spacing-xs $spacing-sm;
              border-radius: $radius-sm;
              font-size: 13px;
              font-weight: 500;
              transition: all $transition-fast;

              &.connect {
                background: $google-blue;
                color: white;

                &:hover:not(:disabled) {
                  background: $google-blue-hover;
                }
              }

              &.disconnect {
                background: #ea4335;
                color: white;

                &:hover:not(:disabled) {
                  background: #d33b2c;
                }
              }

              &:disabled {
                opacity: 0.6;
                cursor: not-allowed;
              }
            }
          }

          .gmail-info {
            margin-top: $spacing-sm;
            padding: $spacing-sm;
            background: #e8f5e8;
            border-radius: $radius-sm;
            
            small {
              color: #137333;
              margin: 0;
            }
          }
        }
      }
    }

    .settings-footer {
      display: flex;
      justify-content: flex-end;
      gap: $spacing-md;
      padding: $spacing-lg;
      border-top: 1px solid $border-light;

      button {
        padding: $spacing-sm $spacing-lg;
        border-radius: $radius-sm;
        font-size: 14px;
        font-weight: 500;
        transition: all $transition-fast;
        display: flex;
        align-items: center;
        gap: $spacing-sm;
      }

      .cancel-button {
        color: $text-secondary;
        border: 1px solid $border-light;

        &:hover {
          background: $surface-variant;
        }
      }

      .save-button {
        background: $google-blue;
        color: white;

        &:hover {
          background: $google-blue-hover;
        }
      }
    }
  }
}
